services:
  docker-socket-proxy:
    image: 'wollomatic/socket-proxy:1.8.0'
    restart: 'unless-stopped'
    read_only: true
    mem_limit: 64M
    cap_drop:
      - 'ALL'
    security_opt:
      - 'no-new-privileges'
    volumes:
      - '/etc/localtime:/etc/localtime:ro'
      - '/var/run/docker.sock:/var/run/docker.sock:ro'
    environment:
      SP_ALLOWHEALTHCHECK: true
    healthcheck:
      test: ['CMD', './healthcheck']
      interval: 10s
      timeout: 5s
      retries: 2
